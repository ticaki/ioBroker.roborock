{"version":3,"file":"device_features.js","sourceRoot":"","sources":["../../src/lib/device_features.ts"],"names":[],"mappings":"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","sourcesContent":["import { Roborock } from \"../main\";\r\n\r\nconst errorCodes = {\r\n\t0: \"No error\",\r\n\t1: \"Laser sensor fault\",\r\n\t2: \"Collision sensor fault\",\r\n\t3: \"Wheel floating\",\r\n\t4: \"Cliff sensor fault\",\r\n\t5: \"Main brush blocked\",\r\n\t6: \"Side brush blocked\",\r\n\t7: \"Wheel blocked\",\r\n\t8: \"Device stuck\",\r\n\t9: \"Dust bin missing\",\r\n\t10: \"Filter blocked\",\r\n\t11: \"Magnetic field detected\",\r\n\t12: \"Low battery\",\r\n\t13: \"Charging problem\",\r\n\t14: \"Battery failure\",\r\n\t15: \"Wall sensor fault\",\r\n\t16: \"Uneven surface\",\r\n\t17: \"Side brush failure\",\r\n\t18: \"Suction fan failure\",\r\n\t19: \"Unpowered charging station\",\r\n\t20: \"Unknown Error\",\r\n\t21: \"Laser pressure sensor problem\",\r\n\t22: \"Charge sensor problem\",\r\n\t23: \"Dock problem\",\r\n\t24: \"No-go zone or invisible wall detected\",\r\n\t254: \"Bin full\",\r\n\t255: \"Internal error\",\r\n\t\"-1\": \"Unknown Error\",\r\n};\r\n\r\nconst stateCodes = {\r\n\t0: \"Unknown\",\r\n\t1: \"Initiating\",\r\n\t2: \"Sleeping\",\r\n\t3: \"Idle\",\r\n\t4: \"Remote Control\",\r\n\t5: \"Cleaning\",\r\n\t6: \"Returning Dock\",\r\n\t7: \"Manual Mode\",\r\n\t8: \"Charging\",\r\n\t9: \"Charging Error\",\r\n\t10: \"Paused\",\r\n\t11: \"Spot Cleaning\",\r\n\t12: \"In Error\",\r\n\t13: \"Shutting Down\",\r\n\t14: \"Updating\",\r\n\t15: \"Docking\",\r\n\t16: \"Go To\",\r\n\t17: \"Zone Clean\",\r\n\t18: \"Room Clean\",\r\n\t22: \"Emptying dust container\",\r\n\t23: \"Washing the mop\",\r\n\t26: \"Going to wash the mop\",\r\n\t28: \"In call\",\r\n\t29: \"Mapping\",\r\n\t100: \"Fully Charged\",\r\n};\r\n\r\nconst dockTypes = {\r\n\t0: \"Charging dock\",\r\n\t1: \"Auto-Empty Dock\",\r\n\t2: \"Empty Wash Fill Dock\",\r\n\t3: \"Empty Wash Fill (Dry) Dock\",\r\n\t5: \"Auto-Empty Dock (Q8 Max+)\",\r\n\t7: \"Empty Wash Fill Dry Dock (S8 Pro Ultra)\",\r\n\t8: \"Empty Wash Fill Dry Dock (Q Revo)\",\r\n\t9: \"Empty Wash Fill Dry Dock (Q Revo Pro)\",\r\n};\r\n\r\nconst firmwareFeatures = {\r\n\t111: \"isSupportFDSEndPoint\",\r\n\t112: \"isSupportAutoSplitSegments\",\r\n\t114: \"isSupportOrderSegmentClean\",\r\n\t116: \"isMapSegmentSupported\",\r\n\t119: \"isSupportLedStatusSwitch\",\r\n\t120: \"isMultiFloorSupported\",\r\n\t122: \"isSupportFetchTimerSummary\",\r\n\t123: \"isOrderCleanSupported\",\r\n\t125: \"isRemoteSupported\",\r\n};\r\n\r\nconst commands: Record<string, any> = {\r\n\tapp_start: { type: \"boolean\", def: false },\r\n\tapp_segment_clean: { type: \"boolean\", def: false },\r\n\tapp_stop: { type: \"boolean\", def: false },\r\n\tapp_pause: { type: \"boolean\", def: false },\r\n\tapp_charge: { type: \"boolean\", def: false },\r\n\tapp_spot: { type: \"boolean\", def: false },\r\n\tapp_zoned_clean: { type: \"json\"},\r\n\tresume_zoned_clean: { type: \"boolean\", def: false },\r\n\tstop_zoned_clean: { type: \"boolean\", def: false },\r\n\tresume_segment_clean: { type: \"boolean\", def: false },\r\n\tstop_segment_clean: { type: \"boolean\", def: false },\r\n\tset_custom_mode: { type: \"number\", def: 102, states: { 101: \"Quiet\", 102: \"Balanced\", 103: \"Turbo\", 104: \"Max\", 105: \"Off\" } },\r\n\tfind_me: { type: \"boolean\", def: false },\r\n\tapp_goto_target: { type: \"json\"},\r\n};\r\n\r\nconst deviceStates = {\r\n\tdock_type: { states: dockTypes },\r\n\terror_code: { states: errorCodes },\r\n\tclean_area: { unit: \"m²\" },\r\n\tclean_time: { unit: \"min\" },\r\n\tbattery: { unit: \"%\" },\r\n\tstate: { states: stateCodes },\r\n\tfan_power: { states: { 101: \"Quiet\", 102: \"Balanced\", 103: \"Turbo\", 104: \"Max\", 105: \"Off\" } },\r\n\tclean_percent: { unit: \"%\" },\r\n\twater_box_custom_mode: { states: { 200: \"Off\", 201: \"Mild\", 202: \"Moderate\", 203: \"Intense\" } },\r\n\twater_box_mode: { type: \"number\", states: { 200: \"Off\", 201: \"Mild\", 202: \"Moderate\", 203: \"Intense\" } },\r\n\tmop_mode: { states: { 300: \"Standard\", 301: \"Deep\", 303: \"Deep+\", 304: \"Fast\"  } },\r\n\tcarpet_mode: {\r\n\t\tstates: {\r\n\t\t\t'[{\"enable\":0,\"stall_time\":10,\"current_low\":400,\"current_high\":500,\"current_integral\":450}]': \"off\",\r\n\t\t\t'[{\"enable\":1,\"stall_time\":10,\"current_low\":400,\"current_high\":500,\"current_integral\":450}]': \"on\",\r\n\t\t},\r\n\t},\r\n\tcarpet_clean_mode: {\r\n\t\tstates: {\r\n\t\t\t'{\"carpet_clean_mode\":0}': \"Avoid\",\r\n\t\t\t'{\"carpet_clean_mode\":1}': \"Rise\",\r\n\t\t\t'{\"carpet_clean_mode\":2}': \"Ignore\",\r\n\t\t},\r\n\t},\r\n};\r\n\r\nconst consumables = {\r\n\tmain_brush_work_time: { unit: \"h\" },\r\n\tside_brush_work_time: { unit: \"h\" },\r\n\tfilter_work_time: { unit: \"h\" },\r\n\tfilter_element_work_time: { unit: \"h\" },\r\n\tsensor_dirty_time: { unit: \"h\" },\r\n\t125: { unit: \"%\" },\r\n\t126: { unit: \"%\" },\r\n\t127: { unit: \"%\" },\r\n\tmain_brush_life: { unit: \"%\" },\r\n\tside_brush_life: { unit: \"%\" },\r\n\tfilter_life: { unit: \"%\" },\r\n};\r\n\r\nconst resetConsumables = [\r\n\t\"main_brush_work_time\",\r\n\t\"side_brush_work_time\",\r\n\t\"filter_work_time\",\r\n\t\"filter_element_work_time\",\r\n\t\"sensor_dirty_time\",\r\n\t\"dust_collection_work_times\",\r\n\t\"strainer_work_times\",\r\n\t\"cleaning_brush_work_times\",\r\n];\r\n\r\nconst cleaningRecords = {\r\n\t2: { unit: \"min\" },\r\n\t3: { unit: \"m²\" },\r\n\tduration: { unit: \"min\" },\r\n\tarea: { unit: \"m²\" },\r\n\tcleaned_area: { unit: \"m²\" },\r\n};\r\n\r\nconst cleaningInfo = {\r\n\t0: { unit: \"h\" },\r\n\t1: { unit: \"m²\" },\r\n\tclean_time: { unit: \"h\" },\r\n\tclean_area: { unit: \"m²\" },\r\n};\r\n\r\nconst actions = {\r\n\tset_custom_mode_max_plus: () => {\r\n\t\tcommands.set_custom_mode.states[108] = \"Max+\";\r\n\t},\r\n\taddSmartModeCommand: () => {\r\n\t\tcommands.app_set_clean_sequence_type = {\r\n\t\t\ttype: \"json\",\r\n\t\t\tdef: '{\\\"fan_power\\\":110,\\\"mop_mode\\\":306,\\\"type\\\":0,\\\"water_box_mode\\\":209}',\r\n\t\t\tstates: {\r\n\t\t\t\t'{\\\"fan_power\\\":102,\\\"mop_mode\\\":300,\\\"repeat\\\":1,\\\"type\\\":1,\\\"water_box_mode\\\":201}': \"Mop and vacuum\",\r\n\t\t\t\t'{\\\"fan_power\\\":110,\\\"mop_mode\\\":306,\\\"type\\\":0,\\\"water_box_mode\\\":209}': \"Smart mode\",\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n};\r\n\r\nexport class device_features {\r\n\tadapter: Roborock;\r\n\tcleaningInfo: Record<string, any>;\r\n\tcleaningRecords: Record<string, any>;\r\n\r\n\tconstructor(adapter: Roborock) {\r\n\t\tthis.adapter = adapter;\r\n\t\tthis.cleaningInfo = {};\r\n\t\tthis.cleaningRecords = {};\r\n\t}\r\n\r\n\tgetCommonCommand(command) {\r\n\t\treturn commands[command];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string | number} attribute\r\n\t */\r\n\tgetCommonDeviceStates(attribute) {\r\n\t\treturn deviceStates[attribute];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string | number} attribute\r\n\t */\r\n\tgetCommonCleaningRecords(attribute) {\r\n\t\treturn cleaningRecords[attribute];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string | number} attribute\r\n\t */\r\n\tgetCommonCleaningInfo(attribute) {\r\n\t\treturn cleaningInfo[attribute];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} consumable\r\n\t */\r\n\tisResetableConsumable(consumable) {\r\n\t\treturn resetConsumables.includes(consumable);\r\n\t}\r\n\r\n\tisWashThenChargeCmdSupported() {\r\n\t\tcommands.app_start_wash = { type: \"boolean\", def: false };\r\n\t\tcommands.app_stop_wash = { type: \"boolean\", def: false };\r\n\r\n\t\tcommands.set_wash_towel_mode = {\r\n\t\t\ttype: \"json\",\r\n\t\t\tdef: '{\"wash_mode\":2}',\r\n\t\t\tstates: {\r\n\t\t\t\t'{\"wash_mode\":0}': \"Eco\",\r\n\t\t\t\t'{\"wash_mode\":1}': \"Medium\",\r\n\t\t\t\t'{\"wash_mode\":2}': \"Intense\",\r\n\t\t\t},\r\n\t\t};\r\n\t\tcommands.set_smart_wash_params = {\r\n\t\t\ttype: \"json\",\r\n\t\t\tdef: '{\"smart_wash\":0,\"wash_interval\":1800}',\r\n\t\t\tstates: {\r\n\t\t\t\t'{\"smart_wash\":0,\"wash_interval\":600}': \"10 Min\",\r\n\t\t\t\t'{\"smart_wash\":0,\"wash_interval\":900}': \"15 Min\",\r\n\t\t\t\t'{\"smart_wash\":0,\"wash_interval\":1200}': \"20 Min\",\r\n\t\t\t\t'{\"smart_wash\":0,\"wash_interval\":1500}': \"25 Min\",\r\n\t\t\t\t'{\"smart_wash\":0,\"wash_interval\":1800}': \"30 Min\",\r\n\t\t\t\t'{\"smart_wash\":0,\"wash_interval\":2100}': \"35 Min\",\r\n\t\t\t\t'{\"smart_wash\":0,\"wash_interval\":2400}': \"40 Min\",\r\n\t\t\t\t'{\"smart_wash\":0,\"wash_interval\":2700}': \"45 Min\",\r\n\t\t\t\t'{\"smart_wash\":0,\"wash_interval\":3000}': \"50 Min\",\r\n\t\t\t\t'{\"smart_wash\":1,\"wash_interval\":1200}': \"Per room\",\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tisDustCollectionSettingSupported() {\r\n\t\tcommands.app_start_collect_dust = { type: \"boolean\", def: false };\r\n\t\tcommands.app_stop_collect_dust = { type: \"boolean\", def: false };\r\n\t\tcommands.set_dust_collection_switch_status = { type: \"json\", def: '{\"status\":1}', states: { '{\"status\":0}': \"Off\", '{\"status\":1}': \"On\" } };\r\n\t\tcommands.set_dust_collection_mode = {\r\n\t\t\ttype: \"json\",\r\n\t\t\tdef: '{\"mode\":0}',\r\n\t\t\tstates: {\r\n\t\t\t\t'{\"mode\":0}': \"Smart\",\r\n\t\t\t\t'{\"mode\":1}': \"Low\",\r\n\t\t\t\t'{\"mode\":2}': \"Medium\",\r\n\t\t\t\t'{\"mode\":4}': \"Max\",\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tisSupportedDrying() {\r\n\t\tcommands.app_set_dryer_status = { type: \"string\", def: '{\"status\": 0}', states: { '{\"status\": 1}': \"On\", '{\"status\": 0}': \"Off\" } };\r\n\t\tcommands.app_set_dryer_setting = {\r\n\t\t\ttype: \"json\",\r\n\t\t\tdef: '{\"on\":{\"dry_time\":10800},\"status\":0}',\r\n\t\t\tstates: {\r\n\t\t\t\t'{\"on\":{\"dry_time\":10800},\"status\":0}': \"Off\",\r\n\t\t\t\t'{\"on\":{\"dry_time\":7200},\"status\":1}': \"2h\",\r\n\t\t\t\t'{\"on\":{\"dry_time\":10800},\"status\":1}': \"3h\",\r\n\t\t\t\t'{\"on\":{\"dry_time\":14400},\"status\":1}': \"4h\",\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tisSupportedWaterMode() {\r\n\t\tcommands.set_mop_mode = { type: \"number\", def: 300, states: { 300: \"Standard\", 301: \"Deep\", 303: \"Deep+\" } };\r\n\t\tcommands.set_water_box_custom_mode = { type: \"number\", def: 201, states: { 200: \"Off\", 201: \"Mild\", 202: \"Moderate\", 203: \"Intense\" } };\r\n\t}\r\n\r\n\tisShakeMopSetSupported() {\r\n\t\t// this.isSupportedWaterMode(); // can not use this for isSupportedWaterMode().\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tisElectronicWaterBoxSupported() {\r\n\t\tthis.isSupportedWaterMode();\r\n\t}\r\n\r\n\tisCarpetSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tisCleanRouteFastModeSupported() {\r\n\t\tcommands.set_mop_mode = { type: \"number\", def: 300, states: { 300: \"Standard\", 301: \"Deep\", 303: \"Deep+\", 304: \"Fast\" } };\r\n\t}\r\n\r\n\tisAvoidCollisionSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tisCornerCleanModeSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tisCameraSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tisVideoLiveCallSupported(duid) {\r\n\t\tconst ip = this.adapter.config.hostname_ip;\r\n\t\tconst streamTypes = {\r\n\t\t\tstream_html: `http://${ip}:${1984 + this.adapter.instance}/stream.html?src=${duid}`,\r\n\t\t\twebrtc_html: `http://${ip}:${1984 + this.adapter.instance}/webrtc.html?src=${duid}&media=video`,\r\n\t\t\tstream_mp4: `http://${ip}:${1984 + this.adapter.instance}/api/stream.mp4?src=${duid}`,\r\n\t\t\trtsp: `rtsp://${ip}:${8554 + this.adapter.instance}/${duid}?video`,\r\n\t\t};\r\n\r\n\t\tfor (const [name, stream_uri] of Object.entries(streamTypes)) {\r\n\t\t\tconst folder = `Devices.${duid}.camera`;\r\n\t\t\tthis.adapter.ensureFolder(folder);\r\n\t\t\tthis.adapter.setObjectAsync(`${folder}.${name}`, {\r\n\t\t\t\ttype: \"state\",\r\n\t\t\t\tcommon: {\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\trole: \"value\",\r\n\t\t\t\t\tread: true,\r\n\t\t\t\t\twrite: false,\r\n\t\t\t\t\tdef: stream_uri,\r\n\t\t\t\t},\r\n\t\t\t\tnative: {},\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tisVoiceControlSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tisSupportSetSwitchMapMode() {\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tisMopForbiddenSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tisShakeMopStrengthSupported() {\r\n\t\tthis.isSupportedWaterMode();\r\n\t}\r\n\r\n\tisWaterBoxSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tisCustomWaterBoxDistanceSupported(duid) {\r\n\t\t// in this special case, create the command directly instead of the usual way\r\n\t\tthis.adapter.setObjectAsync(`Devices.${duid}.commands.set_water_box_distance_off`, {\r\n\t\t\ttype: \"state\",\r\n\t\t\tcommon: {\r\n\t\t\t\tname: this.adapter.translations.set_water_box_distance_off,\r\n\t\t\t\ttype: \"number\",\r\n\t\t\t\trole: \"value\",\r\n\t\t\t\tread: true,\r\n\t\t\t\twrite: true,\r\n\t\t\t\tdef: 1,\r\n\t\t\t\tmin: 1,\r\n\t\t\t\tmax: 30,\r\n\t\t\t},\r\n\t\t\tnative: {},\r\n\t\t});\r\n\t}\r\n\r\n\tisBackChargeAutoWashSupported() {\r\n\t\t// this means the robot can stay reversed into the dock and still charge\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tisAvoidCarpetSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\t// the functions below are used for processing the firmware features from get_fw_features\r\n\tisSupportFDSEndPoint() {\r\n\t\t// nothing for now\r\n\t}\r\n\tisSupportAutoSplitSegments() {\r\n\t\t// nothing for now\r\n\t}\r\n\tisSupportOrderSegmentClean() {\r\n\t\t// nothing for now\r\n\t}\r\n\tisMapSegmentSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\tisSupportLedStatusSwitch() {\r\n\t\t// nothing for now\r\n\t}\r\n\tisMultiFloorSupported(duid) {\r\n\t\tfor (const feature of [\"max_multi_map\", \"max_bak_map\", \"multi_map_count\"]) {\r\n\t\t\tthis.adapter.setObjectAsync(`Devices.${duid}.floors.${feature}`, {\r\n\t\t\t\ttype: \"state\",\r\n\t\t\t\tcommon: {\r\n\t\t\t\t\tname: feature,\r\n\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\trole: \"value\",\r\n\t\t\t\t\tread: true,\r\n\t\t\t\t\twrite: false,\r\n\t\t\t\t},\r\n\t\t\t\tnative: {},\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tisSupportFetchTimerSummary() {\r\n\t\t// nothing for now\r\n\t}\r\n\tisOrderCleanSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\tisRemoteSupported() {\r\n\t\t// nothing for now\r\n\t}\r\n\r\n\tgetFeatureList(duid) {\r\n\t\tconst robotModel = this.adapter.http_api.getRobotModel(duid);\r\n\t\tconst featureSet = this.adapter.http_api.getFeatureSet(duid);\r\n\t\tconst newFeatureSet = this.adapter.http_api.getNewFeatureSet(duid);\r\n\r\n\t\treturn {\r\n\t\t\tisWashThenChargeCmdSupported: ((featureSet / Math.pow(2, 32)) >> 5) & 1,\r\n\t\t\tisDustCollectionSettingSupported: !!(33554432 & featureSet),\r\n\t\t\tisSupportedDrying: ((featureSet / Math.pow(2, 32)) >> 15) & 1,\r\n\t\t\tisShakeMopSetSupported: !!(262144 & featureSet),\r\n\t\t\tisVideoMonitorSupported: !!(8 & featureSet), // I tested this for S7 MaxV, S8 MaxV\r\n\t\t\tisVideoSettingSupported: !!(64 & featureSet), // I tested this for S7 MaxV, S8 MaxV\r\n\t\t\tisCarpetSupported: !!(512 & featureSet),\r\n\t\t\tisPhotoUploadSupported: !!(65536 & featureSet),\r\n\t\t\tisAvoidCollisionSupported: !!(134217728 & featureSet),\r\n\t\t\tisCornerCleanModeSupported: !!(2147483648 & featureSet),\r\n\t\t\t// isCameraSupported: [p.Products.TanosV_CN, p.Products.TanosV_CE, p.Products.TopazSV_CN, p.Products.TopazSV_CE, p.Products.TanosSV].hasElement(p.DMM.currentProduct),\r\n\t\t\tisCameraSupported: !![\"roborock.vacuum.a10\", \"roborock.vacuum.a27\", \"roborock.vacuum.a51\", \"roborock.vacuum.a87\"].includes(robotModel),\r\n\t\t\tisSupportSetSwitchMapMode: !!(268435456 & featureSet),\r\n\t\t\t// isMopForbiddenSupported: !!(p.DMM.isTanosV || p.DMM.isTanos || p.DMM.isTopazSV || p.DMM.isPearlPlus) || !![p.Products.TanosE, p.Products.TanosSL, p.Products.TanosS, p.Products.TanosSPlus, p.Products.TanosSMax, p.Products.Ultron, p.Products.UltronLite, p.Products.Pearl, p.Products.RubysLite].hasElement(p.DMM.currentProduct),\r\n\t\t\tisMopForbiddenSupported: [\r\n\t\t\t\t\"roborock.vacuum.s6\", // S6\r\n\t\t\t\t\"roborock.vacuum.a10\", // S6 MaxV\r\n\t\t\t\t\"roborock.vacuum.a40\", // Q7\r\n\t\t\t\t\"roborock.vacuum.s5e\", // S5 Max\r\n\t\t\t\t\"roborock.vacuum.a38\", // Q7 Max\r\n\t\t\t\t\"roborock.vacuum.a72\", // Q5 Pro\r\n\t\t\t\t\"roborock.vacuum.a73\", // Q8 Max\r\n\t\t\t\t\"roborock.vacuum.a75\", // Q Revo\r\n\t\t\t\t\"roborock.vacuum.a15\", // S7\r\n\t\t\t\t\"roborock.vacuum.a51\", // S8\r\n\t\t\t\t\"roborock.vacuum.a70\", // S8 Pro Ultra\r\n\t\t\t\t\"roborock.vacuum.a62\", // S7 Pro Ultra\r\n\t\t\t\t\"roborock.vacuum.a65\", // S7 Max Ultra\r\n\t\t\t\t\"roborock.vacuum.a27\", // S7 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a87\", // Qrevo MaxV\r\n\t\t\t\t\"roborock.vacuum.a101\", // Q Revo Pro\r\n\t\t\t\t\"roborock.vacuum.a97\", // S8 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a104\", // Roborock Qrevo S\r\n\t\t\t\t\"roborock.vacuum.a135\", // Qrevo Curv\r\n\t\t\t\t\"roborock.vacuum.a117\", // Qrevo Master\r\n\t\t\t\t\"roborock.vacuum.a21\", // Qrevo Slim\r\n\t\t\t\t\"roborock.vacuum.a144\", // Saros 10R\r\n\t\t\t].includes(robotModel),\r\n\t\t\t// isShakeMopStrengthSupported: p.DMM.currentProduct == p.Products.TanosS || p.DMM.currentProduct == p.Products.TanosSPlus || p.DMM.isGarnet || p.DMM.isTopazSV || p.DMM.isPearlPlus || p.DMM.isCoral || p.DMM.isTopazS || p.DMM.isTopazSPlus || p.DMM.isTopazSC || p.DMM.isTopazSV || p.DMM.isPearlPlus || p.DMM.isTanosSMax || p.DMM.isUltron || p.DMM.isUltronSPlus || p.DMM.isUltronSMop || p.DMM.isUltronSV || p.DMM.isPearl\r\n\t\t\tisShakeMopStrengthSupported: [\r\n\t\t\t\t\"roborock.vacuum.a08\", // S6 Pure\r\n\t\t\t\t\"roborock.vacuum.a10\", // S6 MaxV\r\n\t\t\t\t\"roborock.vacuum.a62\", // S7 Pro Ultra\r\n\t\t\t\t\"roborock.vacuum.a51\", // S8\r\n\t\t\t\t\"roborock.vacuum.a15\", // S7\r\n\t\t\t\t\"roborock.vacuum.a27\", // S7 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a19\", // S4 Max\r\n\t\t\t\t\"roborock.vacuum.a40\", // Q7\r\n\t\t\t\t\"roborock.vacuum.a65\", // S7 Max Ultra\r\n\t\t\t\t\"roborock.vacuum.a38\", // Q7 Max\r\n\t\t\t\t\"roborock.vacuum.a73\", // Q8 Max\r\n\t\t\t\t\"roborock.vacuum.a75\", // Q Revo\r\n\t\t\t\t\"roborock.vacuum.a70\", // S8 Pro Ultra\r\n\t\t\t\t\"roborock.vacuum.s5e\", // S5 Max\r\n\t\t\t\t\"roborock.vacuum.a87\", // Qrevo MaxV\r\n\t\t\t\t\"roborock.vacuum.a101\", // Q Revo Pro\r\n\t\t\t\t\"roborock.vacuum.a147\", // Saros 10\r\n\t\t\t].includes(robotModel),\r\n\t\t\t// isWaterBoxSupported: [p.Products.Tanos_CE, p.Products.Tanos_CN].hasElement(p.DMM.currentProduct)\r\n\t\t\tisWaterBoxSupported: [\r\n\t\t\t\t\"roborock.vacuum.s5e\", // S5 Max\r\n\t\t\t\t\"roborock.vacuum.s6\", // S6\r\n\t\t\t\t\"roborock.vacuum.a08\", // S6 Pure\r\n\t\t\t\t\"roborock.vacuum.a10\", // S6 MaxV\r\n\t\t\t\t\"roborock.vacuum.a15\", // S7\r\n\t\t\t\t\"roborock.vacuum.a27\", // S7 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a38\", // Q7 Max\r\n\t\t\t\t\"roborock.vacuum.a40\", // Q7\r\n\t\t\t\t\"roborock.vacuum.a51\", // S8\r\n\t\t\t\t\"roborock.vacuum.a62\", // S7 Pro Ultra\r\n\t\t\t\t\"roborock.vacuum.a65\", // S7 Max Ultra\r\n\t\t\t\t\"roborock.vacuum.a70\", // S8 Pro Ultra\r\n\t\t\t\t\"roborock.vacuum.a73\", // Q8 Max\r\n\t\t\t\t\"roborock.vacuum.a75\", // Q Revo\r\n\t\t\t\t\"roborock.vacuum.a87\", // Qrevo MaxV\r\n\t\t\t\t\"roborock.vacuum.a101\", // Q Revo Pro\r\n\t\t\t\t\"roborock.vacuum.a97\", // S8 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a104\", // Roborock Qrevo S\r\n\t\t\t\t\"roborock.vacuum.a135\", // Qrevo Curv\r\n\t\t\t\t\"roborock.vacuum.a117\", // Qrevo Master\r\n\t\t\t\t\"roborock.vacuum.a21\", // Qrevo Slim\r\n\t\t\t\t\"roborock.vacuum.a144\", // Saros 10R\r\n\t\t\t].includes(robotModel),\r\n\t\t\tisCustomWaterBoxDistanceSupported: !!(2147483648 & featureSet),\r\n\t\t\tisBackChargeAutoWashSupported: newFeatureSet && !!(4096 & parseInt(\"0x\" + newFeatureSet.slice(-8))),\r\n\t\t\tisAvoidCarpetSupported: [\r\n\t\t\t\t\"roborock.vacuum.a10\", // S6 MaxV\r\n\t\t\t\t\"roborock.vacuum.a40\", // Q7\r\n\t\t\t\t\"roborock.vacuum.s6\", // S6\r\n\t\t\t\t\"roborock.vacuum.a73\", // Q8 Max\r\n\t\t\t\t\"roborock.vacuum.a38\", // Q7 Max\r\n\t\t\t\t\"roborock.vacuum.a51\", // S8\r\n\t\t\t\t\"roborock.vacuum.a75\", // Q Revo\r\n\t\t\t\t\"roborock.vacuum.a27\", // S7 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a15\", // S7\r\n\t\t\t\t\"roborock.vacuum.a70\", // S8 Pro Ultra\r\n\t\t\t\t\"roborock.vacuum.a62\", // S7 Pro Ultra\r\n\t\t\t\t\"roborock.vacuum.a65\", // S7 Max Ultra\r\n\t\t\t\t\"roborock.vacuum.a87\", // Qrevo MaxV\r\n\t\t\t\t\"roborock.vacuum.a101\", // Q Revo Pro\r\n\t\t\t\t\"roborock.vacuum.a97\", // S8 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a104\", // Roborock Qrevo S\r\n\t\t\t\t\"roborock.vacuum.a135\", // Qrevo Curv\r\n\t\t\t\t\"roborock.vacuum.a117\", // Qrevo Master\r\n\t\t\t\t\"roborock.vacuum.a21\", // Qrevo slim\r\n\t\t\t\t\"roborock.vacuum.a72\", // Q5 pro\r\n\t\t\t].includes(robotModel),\r\n\t\t\t// this isn't the correct way to use this. This code must be from a different robot\r\n\t\t\t// isVoiceControlSupported: !!(parseInt(`0x${newFeatureSet || \"0\"}`.slice(-10, -9)) & 2),\r\n\t\t\tisVoiceControlSupported: [\r\n\t\t\t\t\"roborock.vacuum.a27\", // S7 MaxV (Ultra)\r\n\t\t\t],\r\n\t\t\tisElectronicWaterBoxSupported: false, // nothing for now. If this is needed, add the models here\r\n\t\t\tisCleanRouteFastModeSupported: newFeatureSet && !!(256 & parseInt(\"0x\" + newFeatureSet.slice(-8))),\r\n\t\t\tisVideoLiveCallSupported: [\r\n\t\t\t\t\"roborock.vacuum.a10\", // S6 MaxV\r\n\t\t\t\t\"roborock.vacuum.a27\", // S7 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a97\", // S8 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a87\", // Qrevo MaxV\r\n\t\t\t\t\"roborock.vacuum.a135\", // Qrevo Curv\r\n\t\t\t\t\"roborock.vacuum.a117\", // Qrevo Master\r\n\t\t\t\t\"roborock.vacuum.a21\", // Qrevo Slim\r\n\t\t\t\t\"roborock.vacuum.a144\", // Saros 10R\r\n\t\t\t].includes(robotModel),\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string | number} attribute\r\n\t */\r\n\tgetCommonConsumable(attribute) {\r\n\t\treturn consumables[attribute];\r\n\t}\r\n\r\n\tasync processSupportedFeatures(duid) {\r\n\t\tconst robotModel = this.adapter.http_api.getRobotModel(duid);\r\n\t\tconst productCategory = this.adapter.http_api.getProductCategory(duid);\r\n\r\n\t\tif (productCategory == \"robot.vacuum.cleaner\") {\r\n\t\t\t// process states etc. depending on model\r\n\t\t\tconst modelConfig = {\r\n\t\t\t\t// S6 Pure\r\n\t\t\t\t\"roborock.vacuum.a08\": [],\r\n\t\t\t\t// S6 MaxV\r\n\t\t\t\t\"roborock.vacuum.a10\": [],\r\n\t\t\t\t// S7\r\n\t\t\t\t\"roborock.vacuum.a15\": [],\r\n\t\t\t\t// S4 Max\r\n\t\t\t\t\"roborock.vacuum.a19\": [],\r\n\t\t\t\t// S7 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a27\": [],\r\n\t\t\t\t// Q7 Max\r\n\t\t\t\t\"roborock.vacuum.a38\": [],\r\n\t\t\t\t// Q7\r\n\t\t\t\t\"roborock.vacuum.a40\": [],\r\n\t\t\t\t// S8\r\n\t\t\t\t\"roborock.vacuum.a51\": [],\r\n\t\t\t\t// S7 Pro Ultra\r\n\t\t\t\t\"roborock.vacuum.a62\": [],\r\n\t\t\t\t// S7 Max Ultra\r\n\t\t\t\t\"roborock.vacuum.a65\": [],\r\n\t\t\t\t// S8 Pro Ultra\r\n\t\t\t\t\"roborock.vacuum.a70\": [\"set_custom_mode_max_plus\"],\r\n\t\t\t\t// Q5 Pro\r\n\t\t\t\t\"roborock.vacuum.a72\": [],\r\n\t\t\t\t// Q8 Max\r\n\t\t\t\t\"roborock.vacuum.a73\": [],\r\n\t\t\t\t// Q Revo\r\n\t\t\t\t\"roborock.vacuum.a75\": [],\r\n\t\t\t\t// S4\r\n\t\t\t\t\"roborock.vacuum.s4\": [],\r\n\t\t\t\t// S5 Max\r\n\t\t\t\t\"roborock.vacuum.s5e\": [],\r\n\t\t\t\t// S6\r\n\t\t\t\t\"roborock.vacuum.s6\": [],\r\n\t\t\t\t// Qrevo MaxV\r\n\t\t\t\t\"roborock.vacuum.a87\": [],\r\n\t\t\t\t// Q Revo Pro\r\n\t\t\t\t\"roborock.vacuum.a101\": [],\r\n\t\t\t\t// S8 MaxV (Ultra)\r\n\t\t\t\t\"roborock.vacuum.a97\": [],\r\n\t\t\t\t// Roborock Qrevo S\r\n\t\t\t\t\"roborock.vacuum.a104\": [],\r\n\t\t\t\t// Roborock Qrevo Curv\r\n\t\t\t\t\"roborock.vacuum.a135\": [],\r\n\t\t\t\t// Roborock Qrevo Master\r\n\t\t\t\t\"roborock.vacuum.a117\": [],\r\n\t\t\t\t// Roborock Qrevo Slim\r\n\t\t\t\t\"roborock.vacuum.a21\": [],\r\n\t\t\t\t// Roborock Saros 10R\r\n\t\t\t\t\"roborock.vacuum.a144\": [],\r\n\t\t\t\t// Roborock Saros 10\r\n\t\t\t\t\"roborock.vacuum.a147\": [\"addSmartModeCommand\"],\r\n\t\t\t\t// Roborock Qrevo Edge Series\r\n\t\t\t\t\"roborock.vacuum.a187\": [],\r\n\t\t\t\t// Roborock Qrevo Edge\r\n\t\t\t\t\"roborock.vacuum.a156\": [],\r\n\t\t\t\t// Roborock QV 35A\r\n\t\t\t\t\"roborock.vacuum.a168\": []\r\n\t\t\t};\r\n\r\n\t\t\t// process modelConfig\r\n\t\t\tconst configActions = modelConfig[robotModel];\r\n\t\t\tif (configActions) {\r\n\t\t\t\tfor (const actionName of configActions) {\r\n\t\t\t\t\tconst action = actions[actionName];\r\n\t\t\t\t\tif (action) {\r\n\t\t\t\t\t\tawait action(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.adapter.log.error(`This robot is not fully supported just yet. Contact the dev to get this robot fully supported! Model: ${robotModel}`);\r\n\t\t\t}\r\n\r\n\t\t\tthis.adapter.createBaseRobotObjects(duid);\r\n\r\n\t\t\tconst featureList = this.getFeatureList(duid);\r\n\t\t\tthis.adapter.log.debug(`Supported features of robot ${duid} - ${robotModel}: ${JSON.stringify(featureList)}`);\r\n\t\t\tObject.keys(featureList).forEach((feature) => {\r\n\t\t\t\tif (featureList[feature]) {\r\n\t\t\t\t\tif (typeof this[feature] === \"function\") {\r\n\t\t\t\t\t\tthis[feature](duid);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// process commands\r\n\t\t\tfor (const [command, commonCommand] of Object.entries(commands)) {\r\n\t\t\t\tawait this.adapter.ensureCommand(`Devices.${duid}.commands.${command}`, commonCommand);\r\n\t\t\t}\r\n\r\n\t\t} else if (productCategory == \"roborock.vacuum\") {\r\n\t\t\t// vacuum (not sure if it's actually roborock.vacuum. Might be something else. Haven't testet)\r\n\t\t\tthis.adapter.createBasicVacuumObjects(duid);\r\n\t\t} else if (productCategory == \"roborock.wm\") {\r\n\t\t\t// washing machine\r\n\t\t\tthis.adapter.createBasicWashingMachineObjects(duid);\r\n\t\t}\r\n\t}\r\n\r\n\tprocessDockType(dockType) {\r\n\t\tswitch (dockType) {\r\n\t\t\tcase 0: // Charging dock\r\n\t\t\t\t// nothing to do here\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1: // Auto-Empty Dock - Onyx: S7+/S7Plus (Empty Dock)\r\n\t\t\t\tthis.isDustCollectionSettingSupported();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2: // Empty Wash Fill Dock - Onyx2: G10\r\n\t\t\t\tthis.isWashThenChargeCmdSupported();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3: // Empty Wash Fill (Dry) Dock - Onyx3: S7 Pro, MaxV Ultra\r\n\t\t\t\tthis.isDustCollectionSettingSupported();\r\n\t\t\t\tthis.isWashThenChargeCmdSupported();\r\n\t\t\t\tthis.isSupportedDrying();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5: // Onyx-C: S8, S8 Plus, Q8, Q8 Max\r\n\t\t\t\tthis.isDustCollectionSettingSupported();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 6: // Onyx3 Plus: S7 Max Ultra\r\n\t\t\t\tthis.isDustCollectionSettingSupported();\r\n\t\t\t\tthis.isWashThenChargeCmdSupported();\r\n\t\t\t\tthis.isSupportedDrying();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 7: // Onyx4: S8 Pro Ultra\r\n\t\t\t\tthis.isDustCollectionSettingSupported();\r\n\t\t\t\tthis.isWashThenChargeCmdSupported();\r\n\t\t\t\tthis.isSupportedDrying();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 8: // PEARL: Q Revo, P10\r\n\t\t\t\tthis.isDustCollectionSettingSupported();\r\n\t\t\t\tthis.isWashThenChargeCmdSupported();\r\n\t\t\t\tthis.isSupportedDrying();\r\n\t\t\t\tbreak;\r\n\t\t\t// Not much info on this one. Might be missing some features\r\n\t\t\tcase 9: // Unknown codename for now: Q Revo Pro\r\n\t\t\t\tthis.isDustCollectionSettingSupported();\r\n\t\t\t\tthis.isWashThenChargeCmdSupported();\r\n\t\t\t\tthis.isSupportedDrying();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tgetFirmwareFeature(featureID) {\r\n\t\tconst feature = firmwareFeatures[featureID];\r\n\r\n\t\tif (feature) {\r\n\t\t\treturn feature;\r\n\t\t} else {\r\n\t\t\treturn \"unknown feature\";\r\n\t\t}\r\n\t}\r\n}"]}